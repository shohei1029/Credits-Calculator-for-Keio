$(function(){var s=0,t=0,b=0,n={};n.s=n.a=n.b=n.c=n.d=n.p=n.f=n.g=n.star=0;var r;$(".User td").each(function(){var r=$(this).html();if(r.match(/取得合計/)){r=(r=r.replace(/取得合計 /g,"")).replace(/単位/g,"");var c=Number(r);t+=c}if(r.match(/自由科目/)){str_f=$(this).next().html(),str_f=str_f.replace(/取得合計 /g,""),str_f=str_f.replace(/単位/g,"");var e=Number(str_f);b+=e}if(r.match(/分野：/)&&$(this).parent().css("background-color","#dddddd"),"Ｓ"==r||"Ａ"==r||"Ｂ"==r||"Ｃ"==r||"Ｄ"==r||"Ｐ"==r||"Ｆ"==r||"Ｇ"==r||"★"==r)switch(r){case"Ｓ":s=$(this).next().html(),s=Number(s),n.s+=s,$(this).css("background-color","#e77f3c");break;case"Ａ":s=$(this).next().html(),s=Number(s),n.a+=s,$(this).css("background-color","#e74c3c");break;case"Ｂ":s=$(this).next().html(),s=Number(s),n.b+=s,$(this).css("background-color","#3498db");break;case"Ｃ":s=$(this).next().html(),s=Number(s),n.c+=s,$(this).css("background-color","#f1e10e");break;case"Ｄ":s=$(this).next().html(),s=Number(s),n.d+=s,$(this).css("background-color","#34495e");break;case"Ｐ":s=$(this).next().html(),s=Number(s),n.p+=s,$(this).css("background-color","#1abc9c");break;case"Ｆ":s=$(this).next().html(),s=Number(s),n.f+=s,$(this).css("background-color","#9b59b6");break;case"Ｇ":s=$(this).next().html(),s=Number(s),n.g+=s,$(this).css("background-color","#2ecc71");break;case"★":s=$(this).next().html(),s=Number(s),n.star+=s,$(this).css("background-color","#95a5a6")}}),r=(4*n.s+3*n.a+2*n.b+1*n.c+0*n.d)/(n.s+n.a+n.b+n.c+n.d),t-=b,$("table.User:nth-child(2) tr:last").html('<td colspan="6">評語別単位数 Ｓ:'+n.s+" Ａ:"+n.a+" Ｂ:"+n.b+" Ｃ:"+n.c+" Ｄ:"+n.d+" Ｐ:"+n.p+" Ｆ:"+n.f+" Ｇ:"+n.g+" ★:"+n.star+" <br>GPA:"+r+'</td><td colspan="2" style="color:red" align="center">計 '+t+"単位<br>+自由科目"+b+"単位</td>"),$("table.User:nth-child(2) tbody").append('<tr><td colspan="8"><span align="left">&nbsp;&nbsp;&nbsp;  GPA =&nbsp; <u> 4×(Sの単位数) + 3×(Aの単位数) + 2×(Bの単位数) + 1×(Cの単位数) </u><br></span><span align="left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  総履修単位数(S〜Dの評語がついた全科目の単位数合計)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;で計算しています。</span></td></tr>'),$("table.User:nth-child(2) tbody").append('<tr><td colspan="8" align="center" style="color:red">※計算結果には自由単位が含まれています。注意してください。</td></tr>')});
